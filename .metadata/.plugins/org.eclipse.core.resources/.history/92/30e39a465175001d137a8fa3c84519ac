package com.pet.controller;

import java.util.List;

import javax.inject.Inject;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.RequestParam;

import com.pet.model.ProductVO;
import com.pet.service.CategoryService;
import com.pet.service.ProductService;

@Controller
public class CategoryController {

	private static final Logger logger = LoggerFactory.getLogger(MemberController.class);

	@Inject
	private CategoryService cService;

	@Inject
	private ProductService pService;

	// 카테고리 별 메인 페이지
	@RequestMapping(value = "/cate_main", method = RequestMethod.GET)
	public String getCateMain(Model model, @RequestParam("cateName") String cateName) throws Exception {

		List<ProductVO> pList = pService.productList(cateName);
		model.addAttribute("ProductList", pList);

		logger.info("CateName : " + cateName);

		return "/" + cateName + "_main";
	}

	/*
	@RequestMapping(value = "/dog_main", method = RequestMethod.GET)
	public void getDogMain(Model model, @RequestParam("cateName") String cateName) throws Exception {

		List<ProductVO> pList = pService.productList("cateName");
		model.addAttribute("ProductList", pList);

		logger.info("Dog 메인 페이지");

	}*/

	// 강아지 종류별 상품 목록
	@RequestMapping(value = "/dog_product_kind", method = RequestMethod.GET)
	public String getDogKindMain(@RequestParam("kind") String kind, Model model) throws Exception {

		List<ProductVO> pkindList = pService.productKindList("dog", kind);
		model.addAttribute("ProductList", pkindList);

		logger.info(pkindList.toString());
		logger.info(kind + " Dog 메인 페이지");

		return "redirect:/dog_main";

	}

	// 2. 고양이 메인 페이지
	@RequestMapping(value = "/cat_main", method = RequestMethod.GET)
	public void getCatMain(Model model) throws Exception {

		List<ProductVO> pList = pService.productList("2");
		model.addAttribute("ProductList", pList);

		logger.info("Cat 메인 페이지");
	}
}
